@using MySQL
@inherits Nancy.ViewEngines.Razor.NancyRazorViewBase<LARPWorks.Cyaniel.Features.Characters.CharacterViewModel>
@{
    Layout = "_Layout.cshtml";
}
@{ int i = 0; }

<div class="content-section">
    <br/>

    <div id="myModal" class="modal fade" role="dialog">
        <div class="modal-dialog modal-lg">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Modal Header</h4>
                </div>
                <div class="modal-body">
                    <p>Some text in the modal.</p>
                </div>
                <div class="modal-footer">
                    <button data-dismiss="modal" class="btn btn-danger">Cancel Changes</button>
                    <button data-dismiss="modal" class="btn btn-primary">Save Changes</button>
                </div>
            </div>

        </div>
    </div>

    <form class="form-horizontal" method="POST">
        <fieldset>
            <div class="center">
                <!-- Form Name -->
                <h2>Player Sheet</h2>
                <hr/>

                <div class="row">
                    <label class="col-md-2 control-label" for="CharacterName">Character Name</label>
                    <div class="col-md-8">
                        <input id="CharacterName" name="CharacterName" type="text" value=""
                               class="form-control input-md" required="">
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-2"></div>
                <div class="col-md-8">
                    <div class="panel with-nav-tabs panel-info">
                        <div class="panel-heading">
                            <ul class="nav nav-tabs">
                                @{ i = 0; }
                                @foreach (string sectionName in Model.Sections)
                                {
                                    if (ViewBag.SelectedSection == sectionName 
                                        || (string.IsNullOrEmpty(ViewBag.SelectedSection) && i == 0))
                                    {
                                        <li class="active"><a href="@string.Format("#tab{0}", i)" data-toggle="tab">@sectionName</a></li>
                                    }
                                    else
                                    {
                                        <li><a href="@string.Format("#tab{0}", i)" data-toggle="tab">@sectionName</a></li>
                                    }
                                    i++;
                                }
                            </ul>
                        </div>
                        <div class="panel-body">
                            <div class="tab-content">
                                @{ i = 0; }
                                @foreach (string sectionName in Model.Sections)
                                {
                                    if (ViewBag.SelectedSection == sectionName
                                        || (string.IsNullOrEmpty(ViewBag.SelectedSection) && i == 0))
                                    {
                                        <div class="tab-pane fade in active" id="@string.Format("tab{0}", i)">Controls will go here for section @sectionName</div>
                                        i++;
                                        continue;
                                    }

                                    <div class="tab-pane fade" id="@string.Format("tab{0}", i)">
                                        @*@RenderSection(sectionName, false)*@
                                        @Html.Partial("Sheets/" + Model.SanitizeSectionName(sectionName), Model)

                                        <a href="#" data-toggle="modal" data-target="#myModal">Edit This Sheet</a>
                                    </div>
                                    i++;
                                }
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="center">
                <!-- Button (Double) -->
                <div class="form-group">
                    <div class="col-md-2">
                        <button id="button3id" name="button3id" class="btn btn-danger">!!! DELETE CHARACTER !!!</button>
                    </div>
                </div>
            </div>
        </fieldset>
    </form>
</div>